# ZADANIE: 035_THE_DREAMER (Synthetic Experience Replay & Imagination Engine)

**Priorytet:** Rewolucyjny (Active Learning & Self-Generated Data)
**Kontekst:** Warstwa Meta-Uczenia i Symulacji
**Cel:** Wdrożenie systemu "aktywnego śnienia". W czasie bezczynności (Idle), Venom ma wykorzystać wiedzę zdobytą przez Wyrocznię (Oracle) do generowania hipotetycznych scenariuszy/problemów programistycznych, rozwiązywać je w odizolowanym środowisku, a w przypadku sukcesu – automatycznie dodawać te doświadczenia do swojego zbioru treningowego (Academy), przyspieszając własną ewolucję bez udziału człowieka.

---

## 1. Kontekst Biznesowy
**Problem:** Venom uczy się tylko na prawdziwych zadaniach zleconych przez użytkownika. To powolny proces. Aby stać się ekspertem w nowej bibliotece (którą właśnie "przeczytał" dzięki PR 034), potrzebuje tysięcy przykładów, których nie ma.
**Rozwiązanie:**
1.  **Analiza:** Venom bierze dokumentację (z GraphRAG).
2.  **Wyobraźnia:** Generuje zadanie: *"Napisz aplikację używającą tej rzadkiej funkcji z dokumentacji"*.
3.  **Symulacja:** Próbuje to zaprogramować (Coder) i uruchomić (Docker).
4.  **Krystalizacja:** Jeśli kod działa -> zapisuje to jako "Syntetyczne Wspomnienie" do douczenia modelu.

---

## 2. Zakres Prac (Scope)

### A. Silnik Snów (`venom_core/core/dream_engine.py`)
*Mózg operacji w tle.*
* **Funkcja `enter_rem_phase()`:** Uruchamiana przez Scheduler w godzinach nocnych lub po 30 min bezczynności.
* **Logika:**
    1. Pobiera losowy "Klastr Wiedzy" z `GraphStore` (np. "FastAPI Websockets").
    2. Zleca `ScenarioWeaver` stworzenie wyzwania.
    3. Uruchamia orkiestrację w trybie "Silent" (bez logów na WebSocket Dashboardu, tylko do pliku).

### B. Tkacz Scenariuszy (`venom_core/simulation/scenario_weaver.py`)
*Agent kreatywny.*
* **Wejście:** Fragment dokumentacji technicznej / węzeł grafu wiedzy.
* **Wyjście:** Specyfikacja zadania (Prompt) + Kryteria sukcesu (Test Cases).
* **Przykład:** *"Na podstawie dokumentacji `pandas`, stwórz zadanie polegające na pivotowaniu tabeli z brakującymi danymi i napisz test sprawdzający poprawność wyniku."*

### C. Walidator Snów (Integracja z `Guardian`)
* Rozszerz `GuardianAgenta`.
* Jeśli `DreamEngine` zgłasza rozwiązanie, Guardian musi być **ultra-surowy**.
* Kod musi się kompilować, przejść testy i nie zawierać błędów bezpieczeństwa.
* Tylko 100% poprawne "sny" trafiają do `LessonsStore` jako materiał treningowy (High Quality Synthetic Data).

### D. Zarządca Energii (`venom_core/core/energy_manager.py`)
*Zabezpieczenie przed "wypaleniem" zasobów.*
* Monitoruje temperaturę CPU/GPU i zużycie prądu (jeśli dostępne przez API hosta/UPS).
* Jeśli obciążenie systemu wzrasta (użytkownik wraca do pracy lub włącza grę) -> Natychmiastowe `wake_up()` (zatrzymanie procesu śnienia).

### E. Dashboard Update: "Dream Journal"
* Nowa sekcja w "The Academy".
* Statystyki nocy: *"Wyśniłem 42 nowe rozwiązania. Nauczyłem się obsługi biblioteki `pydantic` v2."*.
* Możliwość przeglądania "Snów" (wygenerowanego kodu) i ręcznego zatwierdzania ich do bazy wiedzy.

---

## 3. Kryteria Akceptacji (DoD)

1.  ✅ **Generacja z Dokumentacji:**
    * Venom wchłania dokumentację nowej, nieznanej biblioteki (np. mały framework `textual`).
    * Po nocy w folderze `data/synthetic_training/` pojawia się 10 działających przykładów kodu używających `textual`, które Venom sam wymyślił i zweryfikował.
2.  ✅ **Przerwanie Snu:**
    * Venom intensywnie "śni" (High CPU Usage).
    * Użytkownik rusza myszką lub wysyła request API.
    * Venom w ciągu 2 sekund pauzuje kontenery snów i zwalnia zasoby dla użytkownika.
3.  ✅ **Jakość Danych:**
    * Wygenerowany kod w `DatasetCurator` (PR 022) jest oznaczony flagą `synthetic: true`.
4.  ✅ **Integracja z Wyrocznią:**
    * Scenariusze nie są trywialne ("Hello World"), ale oparte na relacjach z `GraphStore` (np. łączenie dwóch bibliotek).

---

## 4. Wskazówki Techniczne
* **Prompt Engineering:** Dla `ScenarioWeavera` użyj techniki "Few-Shot Chain of Thought", aby zmusić model do generowania skomplikowanych, brzegowych przypadków, a nie prostych przykładów.
* **Izolacja:** "Sny" muszą dziać się w osobnych namespace'ach Dockera (`venom-dream-worker-X`), aby nie zaśmiecić głównego `./workspace` użytkownika.
* **Low Priority:** Procesy snu powinny mieć ustawiony niższy priorytet w systemie operacyjnym (`nice` w Linux/WSL), aby nie wpływać na responsywność hosta.
