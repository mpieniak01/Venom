# ZADANIE 048: PorÃ³wnanie ekranÃ³w Brain / Inspector / Strategy (web â†’ web-next)

## Brain / Knowledge Graph
- **Panel sterowania + status**: stary `brain.html`/`brain.js` ma pÅ‚ywajÄ…cy panel `brain-controls` z liczbÄ… wÄ™zÅ‚Ã³w/krawÄ™dzi oraz tekstem statusu (â€Åadowanieâ€¦â€, â€Gotowyâ€, â€BÅ‚Ä…dâ€) i spinnerem (`web/templates/brain.html:224-283`, `web/static/js/brain.js:310-340`). W `web-next/app/brain/page.tsx` mamy metryki w panelach, ale brak widocznego statusu/overlayu oraz mechanizmu pokazujÄ…cego spinner i bÅ‚Ä…d, gdy Cytoscape siÄ™ nie zaÅ‚aduje â€“ warto przywrÃ³ciÄ‡ podobne feedbacki (spinner + notification) i dopisaÄ‡ naprawÄ™ bÅ‚Ä™dÃ³w.
- **Filtry wielozaznaczalne**: w `brain-controls` operacje DOM/Alpine umoÅ¼liwiajÄ… jednoczesne wÅ‚Ä…czanie/wyÅ‚Ä…czanie typÃ³w (`Agents`, `Files`, `Memories`, `Functions`, `Classes`) (`web/templates/brain.html:246-267`, `web/static/js/brain.js:24-65`). W Next.js istnieje tylko `GraphFilterButtons`, czyli wybÃ³r jednego typu â€“ trzeba przenieÅ›Ä‡ logikÄ™ `applyFilters()` i checkboxÃ³w, Å¼eby uÅ¼ytkownik mÃ³gÅ‚ komponowaÄ‡ widoki (np. `agents + files` jednoczeÅ›nie).
- **PodÅ›wietlenia + szczegÃ³Å‚y wÄ™zÅ‚a**: stary kod przy klikniÄ™ciu dodawaÅ‚ klasy `highlighted/neighbour/faded`, wyÅ›wietlaÅ‚ panel `#nodeDetails` z peÅ‚nymi wÅ‚aÅ›ciwoÅ›ciami i liczbÄ… poÅ‚Ä…czeÅ„ oraz umoÅ¼liwiaÅ‚ zamkniÄ™cie (`web/static/js/brain.js:200-300`). Nowy `Sheet` zawiera JSON, ale nie odzwierciedla efektÃ³w typu przygaszanie/rozjaÅ›nianie i nie prezentuje liczby relacji w staÅ‚ym panelu. Warto uzupeÅ‚niÄ‡, aby zachowaÄ‡ UX z informacjÄ… o `PoÅ‚Ä…czeniach`, `Typie` itd. bez koniecznoÅ›ci otwierania arkusza.
- **Loading + error toast**: `brain.js` miaÅ‚ `showLoading`, `hideLoading`, `showError` (stek alertÃ³w na gÃ³rze ekranu) (`web/static/js/brain.js:320-370`). W Next brakuje takiego overlayu i komunikatu â€“ trzeba dodaÄ‡ globalny loading/error state, Å¼eby operator nie patrzyÅ‚ na czarny ekran, gdy graf siÄ™ nie Å‚aduje.

## Inspector / Trace Intelligence
- **Å¹rÃ³dÅ‚o danych diagramu**: stary `inspector.js` pobieraÅ‚ `/api/v1/flow/{requestId}` i generowaÅ‚ `sequenceDiagram` z `rect` na decyzjach, strzaÅ‚kami `->>`/`--x` oraz notatkami dla â€DecisionGateâ€ (`web/static/js/inspector.js:80-190`). Nowy builder (`web-next/app/inspector/page.tsx:395-441`) tylko rysuje liniowy `graph TD` z kolejnych krokÃ³w. Aby zachowaÄ‡ dokÅ‚adnoÅ›Ä‡ flowâ€™a (statusy ok/fail, decision gates, notatki), trzeba przepisaÄ‡ `buildMermaid` na logikÄ™ z oryginalnego `generateMermaidDiagram`.
- **Manualne odÅ›wieÅ¼anie + loading**: `inspector.html` ma przycisk â€ğŸ”„â€ i widok Å‚adowania w liÅ›cie (`web/templates/inspector.html:33-101`), a `inspector.js` ustawia `loading` flagÄ™ podczas fetchowania traceâ€™Ã³w (`inspector.js:60-110`). Obecna wersja bazuje wyÅ‚Ä…cznie na polllingu `useHistory` i nie pokazuje spinnera ani przycisku â€OdÅ›wieÅ¼â€ â€” warto przywrÃ³ciÄ‡ opcjÄ™ rÄ™cznego odÅ›wieÅ¼enia z widocznym stanem Å‚adowania, aby operator miaÅ‚ kontrolÄ™.
- **Panel szczegÃ³Å‚Ã³w krokÃ³w**: stary `details panel` pokazywaÅ‚ JSON `selectedStep` w `pre` i zachÄ™caÅ‚ do klikania elementÃ³w diagramu (`web/templates/inspector.html:200-250`). W Next pod nagÅ‚Ã³wkiem â€Telemetria requestuâ€ opisuje siÄ™ jeden krok, ale nie ma osadzonego JSON-a. Warto dodaÄ‡ dodatkowy blok z peÅ‚nym JSON/konsolÄ…, Å¼eby nie traciÄ‡ szczegÃ³Å‚Ã³w (np. `historyDetail.steps` w formacie `pre`).

## Strategy / War Room
- **Potwierdzenie akcji â€Kampaniaâ€**: `strategy.js` pyta o confirm przed wysÅ‚aniem `/api/campaign/start` (`web/static/js/strategy.js:170-185`). W `web-next/app/strategy/page.tsx` `handleStartCampaign` wywoÅ‚uje endpoint bez potwierdzenia â€“ naleÅ¼y dodaÄ‡ modal/confirm, aby nie uruchamiaÄ‡ kampanii przypadkowo tak jak w poprzednim kokpicie.
- **Toast/alerty dla akcji**: oryginalny kod korzystaÅ‚ z `showNotification` (globalny toast z `window.venomDashboard`) do sygnalizowania powodzenia/bÅ‚Ä™dÃ³w dla roadmapy, kampanii i statusu (`web/static/js/strategy.js:150-200`). Nowy ekran pokazuje tylko wewnÄ™trzny `actionMessage` lub `statusReport`. Dobrze byÅ‚oby zintegrowaÄ‡ podobny system powiadomieÅ„ (lub podpiÄ…Ä‡ do istniejÄ…cych toastÃ³w), by uÅ¼ytkownik od razu wiedziaÅ‚, Å¼e â€Roadmapa utworzonaâ€ lub â€Kampania rozpoczÄ™taâ€.
- **Szybki widok milestone/task summary**: stary widok renderowaÅ‚ `task-list` z emoji/statusami i licznikiem wykonanych zadaÅ„ w kaÅ¼dym milestone (`web/static/js/strategy.js:80-110`). Aktualne accordiony prezentujÄ… opis, ale brakuje takiego szybkiego podsumowania â€completed/natural countâ€ i statusowych emoji â€” warto dodaÄ‡ przynajmniej liczbÄ™ zadaÅ„ wykonanych wzglÄ™dem ogÃ³Å‚u w kaÅ¼dym kamieniu milowym, tak jak byÅ‚o to w `milestone-item`.

## Uwagi koÅ„cowe
- MoÅ¼na rozszerzyÄ‡ dokumentacjÄ™ (np. nowy checkpoint w `docs/_to_do`) o follow-up, gdy powyÅ¼sze moduÅ‚y zostanÄ… odÅ›wieÅ¼one i przetestowane (np. przywrÃ³cenie spinnerÃ³w, testy Playwright, walidacja `buildMermaid`).

## Wykonane kroki
- Dodano potwierdzenie â€Uruchom KampaniÄ™â€ w `web-next/app/strategy/page.tsx`, ktÃ³re pyta o zgodÄ™ (`confirm`) przed wysÅ‚aniem Å¼Ä…dania do `/api/campaign/start`, Å¼eby odwzorowaÄ‡ modal z legacy interfejsu i uniknÄ…Ä‡ przypadkowych akcji.
