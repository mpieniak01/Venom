# Refactor interfejsu VENOM (szablon `_szablon.html`)

## 1. Cel i zakres
- ZastÄ…piÄ‡ aktualny layout Cockpitu layoutem z `_szablon.html` (nowa grafika) i jednoczeÅ›nie wystandaryzowaÄ‡ strukturÄ™ HTML, CSS i JS.
- ZachowaÄ‡ kompatybilnoÅ›Ä‡ z obecnym kodem aplikacji (`web/templates/index.html`, `web/static/js/app.js`, API REST).
- UporzÄ…dkowaÄ‡ style (design tokens, komponenty, reset) i sposÃ³b Å‚adowania bibliotek JS (Chart.js, Mermaid, DOMPurify, Marked).

## 2. Analiza obecnego `_szablon.html`
- **Inline CSS**: caÅ‚e UI zdefiniowane w `<style>` â€“ trzeba wyprowadziÄ‡ do `web/static/css/app.css` (ew. dedykowanego pliku) i zadbaÄ‡ o namespace zmiennych (prefiks `--venom-`).
- **Reset + layout**: globalne `* { margin:0 }`, custom scrollbar, 2 kolumny (`.sidebar`, `.main-workspace`). U nas istnieje juÅ¼ reset + `main-layout`, wiÄ™c trzeba pogodziÄ‡/respektowaÄ‡ obie warstwy.
- **Komponenty**: sidebar telemetry tabs, repo badge, stat cards, console / chips, form wejÅ›ciowy. Wiele elementÃ³w wykorzystuje ID uÅ¼ywane w `app.js` (`liveFeed`, `metricTasks`, `taskInput`, `sendButton`, `queueActive`, `clearWidgetsBtn`, itd.) â€“ zachowanie identyfikatorÃ³w jest krytyczne.
- **ZewnÄ™trzne biblioteki**: w `<head>` importy CDN Chart.js, mermaid, DOMPurify, marked. W produkcie czÄ™Å›Ä‡ jest juÅ¼ w bundlerze â€“ decyzja: trzymaÄ‡ globalnie (np. w base template) lub dynamicznie Å‚adowaÄ‡ moduÅ‚y w `app.js`.
- **HTML struktura**: brak istniejÄ…cych blokÃ³w (np. `queue-tabs-panel`, `right-panel`). Migracja bÄ™dzie polegaÅ‚a na zastÄ…pieniu `index.html` markupem z `_szablon.html`, ale musimy odwzorowaÄ‡ placeholdery slotÃ³w (live feed, metrics, history table) i dodaÄ‡ makra Jinja, jeÅ¼eli sÄ….

## 3. Plan dziaÅ‚ania (wysoki poziom)
1. âœ… **Przeniesienie design tokens** â€“ `web/static/css/app.css` zawiera import Inter/JetBrains, nowe zmienne `--venom-*` i aliasy dla starego theme, reset zostaÅ‚ przeniesiony z `_szablon.html`.
2. âœ… **Refaktoryzacja CSS** â€“ inline style z `_szablon.html` trafiÅ‚y do `app.css` (nowe klasy `venom-panel-header`, `console-input-stack`, utilsy typograficzne), pozostaje dalsze porzÄ…dkowanie/responsywnoÅ›Ä‡ w pozostaÅ‚ych widokach.
3. âœ… **Integracja HTML** â€“ `web/templates/index.html` korzysta w 100% z layoutu `_szablon.html`, zachowujÄ…c wszystkie identyfikatory wymagane przez `app.js`; stare klasy (`left-stack`, `right-panel`, `right-column`, `main-layout`) zostaÅ‚y usuniÄ™te z markupu i CSS, a lewy blok zakÅ‚adek/telemetrii dziaÅ‚a na nowych komponentach (`cockpit-grid`, `queue-tabs-panel--nav`) wiÄ™c nie ma juÅ¼ miksu starego i nowego UI. Te same komponenty `venom-page` (hero + meta-karty + blok akcji) sÄ… juÅ¼ uÅ¼ywane w `strategy.html`, `flow_inspector.html`, `inspector.html` i `brain.html`, wiÄ™c caÅ‚y system ma jednolity wyglÄ…d zamiast osobnych layoutÃ³w.
4. âœ… **Aktualizacja JS**
   - PrzejrzeÄ‡ `web/static/js/app.js` i zsynchronizowaÄ‡ nowe stany (np. nowe akcje w kartach, przeÅ‚Ä…cznik sidebaru) â€“ rozpoczÄ™te poprzez nowy menedÅ¼er zakÅ‚adek (ARIA + obsÅ‚uga klawiatury) spÃ³jny z layoutem `_szablon.html`.
   - Dashboard Cockpitu ma panel â€History Insightsâ€: `app.js` liczy Å‚Ä…cznÄ… liczbÄ™ Å¼Ä…daÅ„, sukcesy, bÅ‚Ä™dy oraz Å›redni czas wykonania i renderuje je w nowych kartach w zakÅ‚adce Historia.
   - Widoki pomocnicze (`flow_inspector.js`, `inspector.js`, `brain.js`) aktualizujÄ… nagÅ‚Ã³wki `venom-page` â€“ Flow Inspector pokazuje liczbÄ™ zadaÅ„ i timestamp, Inspector prezentuje liczbÄ™ widocznych Å›ladÃ³w / globalnÄ… oraz ile pinÃ³w trzyma operator, Brain zaciÄ…ga status grafu i czas ostatniego odÅ›wieÅ¼enia.
   - âœ… Flow Inspector zapamiÄ™tuje stan wyszukiwarki, wybrany filtr statusu i przeÅ‚Ä…cznik auto-refresh w `localStorage`, wiÄ™c po przeÅ‚adowaniu moduÅ‚ otwiera siÄ™ dokÅ‚adnie w tym samym kontekÅ›cie (bez rÄ™cznego ustawiania filtrÃ³w).
   - âœ… Inspector zapamiÄ™tuje wyszukiwarkÄ™, aktywny filtr statusu i przeÅ‚Ä…cznik auto-refresh w `localStorage`, wiÄ™c analityk wraca do tej samej konfiguracji listy Å›ladÃ³w po odÅ›wieÅ¼eniu moduÅ‚u.
   - âœ… War Room (strategy.js) zapamiÄ™tuje decyzjÄ™ o auto-refresh w `localStorage`, wiÄ™c po powrocie na stronÄ™ dashboard natychmiast startuje (lub zatrzymuje siÄ™) zgodnie z preferencjÄ… operatora, bez koniecznoÅ›ci przeÅ‚Ä…czania.
   - âœ… Cockpit: zakÅ‚adki Historia/Zadania/PamiÄ™Ä‡ majÄ… dedykowane przyciski â€Resetuj filtryâ€, ktÃ³re czyszczÄ… wyszukiwarki, filtry i auto-refresh oraz od razu odÅ›wieÅ¼ajÄ… dane; stan jest zapisywany w `venomUIPreferences`, wiÄ™c operator moÅ¼e Å‚atwo wrÃ³ciÄ‡ do ustawieÅ„ domyÅ›lnych po kaÅ¼dej sesji.
   - âœ… Panel zakÅ‚adek Cockpitu pozwala nadaÄ‡ dowolnÄ… zakÅ‚adkÄ™ jako domyÅ›lnÄ… oraz przywrÃ³ciÄ‡ tryb â€Transmisjaâ€; preferencja zapisuje siÄ™ w `venomUIPreferences.general` i jest widoczna jako znacznik â­ przy odpowiednim przycisku.
   - âœ… Centrum preferencji potrafi generowaÄ‡ paczkÄ™ JSON do pobrania jednym klikniÄ™ciem (â€Pobierz plikâ€) oraz wczytaÄ‡ konfiguracjÄ™ z pliku (FileReader + podpowiedÅº, czytanie nazwy pliku) â€“ moÅ¼na wiÄ™c migrowaÄ‡ ustawienia miÄ™dzy Å›rodowiskami bez kopiowania rÄ™cznego.
5. âœ… **Biblioteki zewnÄ™trzne**
   - Chart.js, Mermaid, DOMPurify i Marked sÄ… bundlowane lokalnie (`/static/vendor/*`) i Å‚adowane z `base.html`, co usuwa zaleÅ¼noÅ›Ä‡ od CDN i uÅ‚atwia wersjonowanie/offline.
6. âœ… **QA i testy**
   - Dodano `make qa` (wywoÅ‚uje `scripts/qa/run_ui_suite.sh`, ktÃ³re zakÅ‚ada `.venv`, instaluje minimalne zaleÅ¼noÅ›ci i odpala `pytest` w trybie `-q`).
   - 2025-12-12: `.venv/bin/pytest -q` zakoÅ„czone sukcesem (**1348 passed, 108 skipped, 13 warnings**, ~102 s). OstrzeÅ¼enia dotyczÄ… jedynie przestarzaÅ‚ych dekoratorÃ³w Pydantic i opcjonalnych moduÅ‚Ã³w (`sentence_transformers`), brak regresji.

## 4. Najlepsze praktyki / standardy front-end
**CSS / Layout**
- System design tokens â€“ wszystkie kolory, spacing, promienie, typografia jako zmienne CSS w jednym miejscu; aliasy mapujÄ…ce stary i nowy theme. UÅ‚atwia dark/light theme i wspÃ³Å‚dzielenie styli.
- Layout przy uÅ¼yciu CSS Grid + Flex â€“ grid dla struktur makro (np. ukÅ‚ad 2 kolumn, siatka statystyk), flex do wewnÄ™trznych moduÅ‚Ã³w (sidebar, przyciski). Pozwala to na responsywnoÅ›Ä‡ bez hackÃ³w.
- BEM/semantyczne klasy â€“ nazwy w stylu `.sidebar__nav`, `.console__wrapper` dziÄ™ki czemu CSS jest czytelny, a JS moÅ¼e targetowaÄ‡ jasne selektory.
- Kontrolowane przewijanie (`min-height:0`, `overflow:auto`) w panelach (chat, telemetry) i media queries (~1200px, ~900px), aby uniknÄ…Ä‡ globalnego scrolla.
- WspÃ³lne mixiny/utilities (np. `.panel`, `.chip`) â€“ komponenty wielokrotnego uÅ¼ytku zamiast duplikacji w kaÅ¼dej stronie.

**HTML**
- Semantyczne znaczniki (nagÅ‚Ã³wki zachowujÄ… hierarchiÄ™, listy/`dl` dla metryk) i definicja regionÃ³w (`<main>`, `<aside>`, `<nav>`).
- Zachowanie staÅ‚ych identyfikatorÃ³w wymaganych przez JS (`id="liveFeed"`, `id="historyModal"`) oraz data-attributes dla logiki (np. `data-tab`).
- DostÄ™pnoÅ›Ä‡: aria-label dla ikon, role dla kontenerÃ³w, odpowiednie `button type="button"` aby unikaÄ‡ domyÅ›lnego submit.
- Minimalizacja inline-style; preferowana konfiguracja przez klasy + CSS variables.

**JavaScript**
- Rozdzielenie logiki od prezentacji: JS manipuluje klasami (`classList.add/remove`) i atrybutami, nie wstrzykuje â€œsztywnychâ€ styli.
- Hooki DOM w `initElements()` â€“ wszystkie selektory w jednym miejscu, dziÄ™ki czemu Å‚atwo Å›ledziÄ‡ zaleÅ¼noÅ›ci miÄ™dzy template a JS.
- ModularnoÅ›Ä‡: pliki takie jak `app.js`, `brain.js` utrzymujÄ… lokalne funkcje, deklarujÄ… dependencies (Chart, Mermaid) i korzystajÄ… z `async/await` + `try/catch`.
- ReuÅ¼ywalne utilsy (formatowanie czasu, obsÅ‚uga modali) zamiast powtÃ³rzeÅ„ w kaÅ¼dej podstronie.
- Kontrola zasobÃ³w zewnÄ™trznych: biblioteki (Chart.js, Mermaid, DOMPurify, Marked) Å‚adowane raz przez bundler, wersje przypiÄ™te, brak globalnych `eval`.
- Wsparcie dla dostÄ™pnoÅ›ci: focus management w modalach, asynchroniczne operacje zakoÅ„czone user feedback (toast/alert).

## 5. WpÅ‚yw na pozostaÅ‚e widoki i JS
- **Lista szablonÃ³w**: oprÃ³cz `web/templates/index.html` Cockpit, w repo sÄ… m.in. `web/templates/brain.html`, `web/templates/inspector.html`, `web/templates/war_room.html`, `web/templates/flow_inspector.html`. KaÅ¼dy ma wÅ‚asny layout, ale niektÃ³re korzystajÄ… z tych samych elementÃ³w (`historyModal`, telemetry). Po zatwierdzeniu nowego wyglÄ…du Cockpitu trzeba sukcesywnie migrowaÄ‡ pozostaÅ‚e podstrony do wspÃ³lnego ukÅ‚adu (`sidebar + main-workspace`) i wspÃ³Å‚dzieliÄ‡ komponenty CSS.
- **Skrypty JS**: gÅ‚Ã³wna logika interfejsu mieszka w `web/static/js/app.js` (Cockpit) oraz w dedykowanych plikach (`brain.js`, `flow_inspector.js`, `inspector.js`, itd.). KaÅ¼dy z nich manipuluje DOM przez okreÅ›lone identyfikatory (`cy`, `knowledgeStats`, `taskList`, `historyTableBody`). Nowy layout **musi zachowaÄ‡** te ID albo zapewniÄ‡ adaptery, Å¼eby uniknÄ…Ä‡ regresji. Po wdroÅ¼eniu Cockpitu naleÅ¼y przejrzeÄ‡ inne skrypty i zaktualizowaÄ‡ ich selektory/style (np. `brain.js` uÅ¼ywa `#cy`, `#knowledge-stats`, `#filters`).
- **Konwencje HTML/CSS**: gdy Cockpit bÄ™dzie dziaÅ‚aÅ‚ z nowym theme, przenosimy te same klasy oraz zmienne do wspÃ³lnego zestawu (np. `.sidebar`, `.console-wrapper`) i stosujemy je w innych widokach. DziÄ™ki temu CSS bÄ™dzie wspÃ³Å‚dzielony, a kolejne strony bÄ™dÄ… mogÅ‚y korzystaÄ‡ z tych samych tokenÃ³w (czcionki, spacing).
- **Biblioteki i bundling**: jeÅ¼eli Chart.js, Mermaid czy DOMPurify majÄ… byÄ‡ w caÅ‚ym UI, dodajemy je do globalnego bundla i upewniamy siÄ™, Å¼e np. `brain.js` dalej dostaje `cytoscape` bez konfliktu.


## 6. Kwestie wymagajÄ…ce decyzji
- Jak wpiÄ…Ä‡ nowy sidebar w istniejÄ…ce blocki base template? (np. `nav`/`header` w `base.html` vs. nowy UI).
- Czy zachowaÄ‡ obecne nazwy zmiennych CSS, czy wprowadziÄ‡ aliasy? (unikniÄ™cie regresji w innych widokach).

## 7. PostÄ™p (2025-12-12)
- âœ… `app.css`: dodano zmienne `--venom-*`, gradientowe tÅ‚o, nowe klasy layoutu oraz import fontÃ³w â€“ stary theme nadal dziaÅ‚a dziÄ™ki aliasom.
- âœ… `base.html`/`index.html`: `body` i navbar sÄ… konfigurowalne blokami; cockpit renderuje juÅ¼ sidebar, karty i konsolÄ™ z `_szablon.html` z zachowaniem ID oczekiwanych przez `app.js`.
- âœ… Panel â€Aktywne zadaniaâ€ (`taskList`) i brakujÄ…ce style (task list, statusy, job panels) zostaÅ‚y dostosowane do nowego motywu, aby zachowaÄ‡ funkcjonalnoÅ›ci starego UI mimo innej makiety.
- âœ… `app.js`: dodano helpery `showModal/hideModal` i ujednolicono obsÅ‚ugÄ™ modali (history/cost/autonomy) z nowÄ… bazÄ… CSS â€“ brak inline-style, Å‚atwiejsze rozszerzanie na kolejne widoki.
- âœ… `brain.html`: przeniesiono inline CSS do `app.css`, ustawiono `data-layout="brain"` i przygotowano komponenty (`brain-controls`, `brain-node-details`, loading overlay) kompatybilne z `brain.js` â€“ hero `venom-page` ma teraz live metryki (wÄ™zÅ‚y/krawÄ™dzie/status/timestamp).
- âœ… `brain.js`: panel detali i loading korzystajÄ… z nowych klas (`brain-detail-*`, `brain-loading`), a logika nie manipuluje juÅ¼ `style.display`, dziÄ™ki czemu zachowanie jest spÃ³jne z layoutem Venom. Statystyki grafu aktualizujÄ… zarÃ³wno boczny panel, jak i meta-karty w nagÅ‚Ã³wku (wÄ™zÅ‚y/krawÄ™dzie + status + czas).
- âœ… Widok Brain dostaÅ‚ peÅ‚ny panel sterowania (status, metka czasu, wyszukiwarka, auto-refresh i komunikaty). `brain.js` to teraz moduÅ‚ klasy `BrainGraph` zarzÄ…dzajÄ…cy stanem filtrÃ³w, wyszukiwaniem wÄ™zÅ‚Ã³w i cyklicznym odÅ›wieÅ¼aniem grafu bez Alpine/inline JS â€“ panel Insights pokazuje liczbÄ™ widocznych wÄ™zÅ‚Ã³w/krawÄ™dzi oraz podsumowanie aktywnych filtrÃ³w.
- âœ… `flow_inspector.html` + `flow_inspector.js`: przeniesiono style do `app.css`, dodano `data-layout="flow"`, dedykowane komponenty kartowe i wydzielony skrypt z auto odÅ›wieÅ¼aniem (bez inline JS/CSS).
- âœ… `inspector.html`: widok korzysta z `data-layout="inspector"`, kart Venom oraz komponentÃ³w (`inspector-shell`, `inspector-panel`, statusy) zamiast inline CSS/Alpine markup.
- ğŸš§ NastÄ™pny krok: zsynchronizowaÄ‡ `app.js` (plan punkt 4) i zastosowaÄ‡ nowy layout + tokeny w pozostaÅ‚ych podstronach z listy 043, pilnujÄ…c responsywnoÅ›ci.
- âœ… `strategy.html` + `strategy.js`: War Room korzysta z `data-layout="strategy"`, komponentÃ³w `war-room-*` w `app.css` i zaktualizowanych szablonÃ³w HTML/JS (bez starego `strategy.css`, zachowane ID i funkcje `loadRoadmap`, `startCampaign`, itp.).
- âœ… War Room (`strategy.html` + `strategy.js`): nagÅ‚Ã³wek `venom-page` pokazuje teraz kluczowe metryki (postÄ™p %, liczba milestone'Ã³w/tasks, health kamieni), a skrypt zasila je tymi samymi danymi co kafle KPI â€“ operator wchodzi do moduÅ‚u i od razu widzi kondycjÄ™ roadmapy.
- âœ… War Room zapamiÄ™tuje stan auto-refresh w `localStorage`, wiÄ™c przeÅ‚Ä…czenie trybu monitorowania roadmapy utrzymuje siÄ™ pomiÄ™dzy sesjami/przeÅ‚adowaniami strony.
- âœ… Legacy `index_.html` oraz `index.css` usuniÄ™te (stare demo nie jest juÅ¼ potrzebne po migracji na nowy Cockpit).
- âœ… `strategy.css` usuniÄ™ty â€“ dedykowane style War Room Å¼yjÄ… wyÅ‚Ä…cznie w `app.css`, dziÄ™ki czemu wszystkie layouty korzystajÄ… z jednego pliku.
- âœ… Sekcja â€Zbrojownia AIâ€ (`modelsList` + `app.js`) korzysta z nowych komponentÃ³w kart (`model-card*` w `app.css`) bez inline-style â€“ aktywacja/usuwanie modeli dziaÅ‚a w JS poprzez klasy tematyczne.
- âœ… System powiadomieÅ„ Cockpitu (kontener + toasty) korzysta z klas w `app.css` (`notification-container`, `notification--*`) zamiast inline-style ustawianych w `app.js`.
- âœ… `_navbar.html`/`base.html`: globalny pasek nawigacji zostaÅ‚ przebudowany na â€Venom Global Navâ€ â€“ szklany, neonowy header z chipami builda, nowym menu i kontrolkami (Autonomia + Cost Guard) jest sticky i pojawia siÄ™ na wszystkich podstronach poza Cockpitem, dziÄ™ki czemu War Room/Inspector/Brain wyglÄ…dajÄ… spÃ³jnie z nowym layoutem.
- âœ… `app.css`: dodano moduÅ‚ `venom-page` (hero + meta-karty + CTA) z tÅ‚em gradientowym i breakpointsami â€“ korzystajÄ… z niego War Room, Flow Inspector, Inspector oraz Brain, wiÄ™c kaÅ¼da sekcja ma identycznÄ… ramÄ™ startowÄ….
- âœ… Cockpit: lewa kolumna odzyskaÅ‚a peÅ‚ny blok zakÅ‚adek/telemetrii z `_szablon.html`, prawa kolumna skupia governance + konsolÄ™; nowa siatka `cockpit-grid` zachowuje dwukolumnowy ukÅ‚ad starego interfejsu i odpowiadajÄ…ce style responsywne.
- âœ… Lewy panel (`queue-tabs-panel--nav` + `cockpit-telemetry-panel`) odwzorowuje legacy ukÅ‚ad: przyciski zakÅ‚adek siedzÄ… w osobnym, niskim boksie, a caÅ‚e treÅ›ci tabÃ³w przewijajÄ… siÄ™ w dedykowanym `aside`, co daje identyczny flow jak w `origin/main`.
- âœ… UsuniÄ™to legacy klasy layoutu (`left-stack`, `right-panel`, `right-column`, `main-layout`) i przeniesiono styling zakÅ‚adek na komponenty Venom â€“ nie ma juÅ¼ mieszanki starych styli z nowymi, a `app.js` zachowuje peÅ‚nÄ… kompatybilnoÅ›Ä‡ ID.
- ğŸš§ Nawigacja zakÅ‚adek Cockpitu ma dedykowany moduÅ‚ (`initTabNavigation` w `app.js`) â€“ jeden zestaw listenerÃ³w zarzÄ…dza klikniÄ™ciami i strzaÅ‚kami klawiatury, aktualizuje atrybuty ARIA/`hidden`, wiÄ™c logika nie jest juÅ¼ rozsiana po `initMemoryTab`.
- ğŸš§ Preferencje uÅ¼ytkownika (ostatnio otwarta zakÅ‚adka) sÄ… zapisywane w `localStorage`, wiÄ™c po przeÅ‚adowaniu Cockpit wraca np. od razu do Historii czy PamiÄ™ci zamiast zawsze zaczynaÄ‡ od Transmisji.
- ğŸš§ Panelowe ustawienia (filtry i auto-refresh w Historia/Zadania/PamiÄ™Ä‡) sÄ… zapisywane w przeglÄ…darce â€“ Cockpit po odÅ›wieÅ¼eniu zachowuje kryteria wyszukiwania i decyzjÄ™ o auto-odÅ›wieÅ¼aniu, co eliminuje koniecznoÅ›Ä‡ rÄ™cznej rekonfiguracji.
- âœ… Pasek statusu nad gridem (workspace path + wskaÅºnik poÅ‚Ä…czenia + baner repo) jest spiÄ™ty z `app.js`: WebSocket synchronizuje kropki statusu, `fetchRepositoryStatus` podaje Å›cieÅ¼kÄ™ workspace oraz komunikaty (info/warning/success/error), a nowe klasy `.status-alert--*` w `app.css` dbajÄ… o stylistykÄ™.
- âœ… Workspace banner nie dubluje juÅ¼ komunikatu o braku repozytorium â€“ gdy Git nie jest dostÄ™pny, pole ze Å›cieÅ¼kÄ… jest ukrywane, a operator widzi tylko pojedynczy alert w zÅ‚otej ramce.
- âœ… NagÅ‚Ã³wek â€// DASHBOARD CONTROLâ€ wyrÃ³wnano z kartami statusu â€“ `venom-top-header` ustawia teraz elementy w jednej linii, wiÄ™c hero i baner workspace startujÄ… w tym samym poziomie.
- âœ… Blok â€GaÅ‚Ä…Åº / zmianyâ€ pokazuje neutralny placeholder, gdy workspace nie jest repozytorium â€“ szczegÃ³Å‚owy komunikat Å¼yje wyÅ‚Ä…cznie w banerze `Workspace`, wiÄ™c UI nie duplikuje ostrzeÅ¼eÅ„ (sterowane w `updateRepositoryStatus` w `app.js`).
- âœ… ZakÅ‚adka â€Transmisjaâ€ (`feedTab`) zostaÅ‚a przeniesiona na karty Venom â€“ metryki (`metricTasks`, `metricSuccess`, `metricUptime`, `metricNetwork`) siedzÄ… w siatce `telemetry-metric-card`, sekcje Integracje/Operacje/Terminal majÄ… wspÃ³lne nagÅ‚Ã³wki i kontenery (`telemetry-section*`), wiÄ™c layout wyglÄ…da jak w `_szablon.html`, a wszystkie ID uÅ¼ywane przez `app.js` pozostaÅ‚y aktywne.
- âœ… ZakÅ‚adka â€Zadania w tleâ€ (`jobsTab`) korzysta z nowych komponentÃ³w (`telemetry-section`, `jobs-panel`, `jobs-status-card`) â€“ wyszukiwarka, filtry, auto-refresh i kafle statusÃ³w (Scheduler/Watcher/Documenter/Gardener) zostaÅ‚y odtworzone 1:1 ze starego indexa, zachowujÄ…c identyfikatory wymagane przez `app.js`.
- âœ… ZakÅ‚adka â€PamiÄ™Ä‡â€ (`memoryTab`) zostaÅ‚a przeÅ‚Ä…czona na layout Venom â€“ nagÅ‚Ã³wek `memory-panel`, kontrolki (wyszukiwarka, filtry, auto-refresh) i sekcje â€Lekcjeâ€ + â€Graf wiedzyâ€ uÅ¼ywajÄ… wspÃ³lnych komponentÃ³w (`telemetry-section`, `memory-body`), wiÄ™c JS obsÅ‚ugujÄ…cy `memoryState` nadal dziaÅ‚a na tych samych ID.
- âœ… Zbrojownia AI (`modelsTab`) korzysta z nowych paneli (`models-panel`, `models-metrics-grid`, `models-installer`) â€“ metryki zasobÃ³w (CPU/GPU/RAM/VRAM/Disk/Count), instalator oraz lista modeli majÄ… wspÃ³lne nagÅ‚Ã³wki i styl `_szablon.html` z zachowaniem wszystkich hakÃ³w (`refreshModels`, `modelNameInput`, `modelsList`, `unloadAllBtn` itd.). Dodatkowy blok â€Models Insightsâ€ pokazuje liczbÄ™ zainstalowanych/aktywnych modeli, Å‚Ä…czny rozmiar paczek oraz zestaw kwantyzacji (aktualizowany przez `app.js` polegajÄ…c na `/api/v1/models`).
- âœ… Historia (`historyTab`) zostaÅ‚a ujednolicona â€“ nagÅ‚Ã³wki, wyszukiwarka, filtry statusÃ³w i autofresh siedzÄ… w `telemetry-section history-panel`, tabela (`historyTable`/`historyTableBody`) zachowuje ID dla `app.js`, wiÄ™c zarÃ³wno UI jak i logika modala dziaÅ‚ajÄ… w nowym layoutcie.
- âœ… Centrum gÅ‚osowe (`voiceTab`) korzysta z paneli Venom â€“ nagÅ‚Ã³wek ze statusem WebSocket (`audioConnectionStatus`), push-to-talk (`micButton`), wizualizator oraz sekcja Rider-Pi (`refreshIoTBtn`, `iotStatus`, `iotMetrics`) siedzÄ… w jednej siatce `voice-grid`, dziÄ™ki czemu Voice Command Center zachowuje funkcjonalnoÅ›ci starego UI.
- âœ… Panel zarzÄ…dzania kolejkÄ… (`queue-governance-panel`) korzysta z nowych komponentÃ³w kartowych â€“ nagÅ‚Ã³wek Venom + kartowe metryki (`queueActive`, `queuePending`, `sessionCost`) oraz przyciski (pauza/wznÃ³w/purge/emergency stop) osadzone bezpoÅ›rednio w kaflach, wiÄ™c UX i ID z `app.js` sÄ… zachowane przy nowym wyglÄ…dzie.
- âœ… Konsola czatu korzysta z ukÅ‚adu legacy (`chat-container`, panel sugestii, stopka z `Lab Mode` + `WyÅ›lij / Ctrl+Enter`), ale siedzi w nowej â€Venom Consoleâ€ â€“ zachowaliÅ›my identyfikatory (`taskInput`, `sendButton`, `suggestionPanel`, `clearWidgetsBtn`) oraz dodaliÅ›my stylizowane `kbd`, dziÄ™ki czemu hotkey i przeÅ‚Ä…cznik Lab Mode sÄ… ponownie widoczne w UI.
- âœ… Lab Mode w konsoli zapamiÄ™tuje swoje ustawienie w `localStorage`, dziÄ™ki czemu po przeÅ‚adowaniu Cockpit startuje w tym samym trybie (oszczÄ™dzajÄ…c klikniÄ™cia); `app.js` wykorzystuje teÅ¼ ten stan przy wysyÅ‚aniu zadaÅ„, wiÄ™c backend otrzymuje konsekwentny sygnaÅ‚ o tym, czy naleÅ¼y zapisywaÄ‡ lekcje.
- âœ… Pasek postÄ™pu testÃ³w (`showTestProgressBar` w `app.js`) renderuje kartÄ™ z klasami (`test-progress*` w `app.css`) zamiast dynamicznych `style.cssText`, wiÄ™c status sukces/bÅ‚Ä…d zarzÄ…dzany jest przez klasy.
- âœ… Lista aktywnych zadaÅ„ (`taskList`) nie korzysta juÅ¼ z inline `flex` w `app.js` â€“ elementy uÅ¼ywajÄ… klasy `.task-content` dodanej do `app.css`, co domyka przeniesienie layoutu do styli.
- âœ… Pasek instalacji modeli (`progressDiv` w Armory) przeÅ‚Ä…czany jest klasÄ… `is-hidden`, zamiast ustawiania `style.display` bezpoÅ›rednio w JS.
- âœ… SzczegÃ³Å‚y historii/Timeline (`showHistoryDetail`) nie wstrzykujÄ… inline-style â€“ tytuÅ‚ sekcji korzysta z klasy `.request-timeline-title` w `app.css`.
- âœ… Repo widget + IoT status + history/integrations: wszystkie toggle widocznoÅ›ci/kursory przeniesione na klasy (`is-hidden`, `.iot-metrics.is-visible`, `.widgets-grid--visible`, `.history-row`, `.service-last-check`) bez manipulacji `style.*` w JS.
- âœ… `inspector.js` â€“ komunikaty bÅ‚Ä™dÃ³w i interaktywnoÅ›Ä‡ diagramu korzystajÄ… z klas (`inspector-diagram-error*`, `inspector-diagram-clickable`) zamiast inline-style, zachowujÄ…c hover/klik oraz spÃ³jny wyglÄ…d.
- âœ… Historia zadaÅ„ w Cockpicie: wiersze `history-row` majÄ… focus/wybÃ³r, klikalnoÅ›Ä‡ i auto-odÅ›wieÅ¼anie modala (klasy `.history-row--selected`, `service-last-check` itd. + logika w `app.js`), wiÄ™c modal detali odÅ›wieÅ¼a siÄ™ wraz z tabelÄ… bez inline JS.
- âœ… ZakÅ‚adka historii Cockpitu ma kompletny panel sterowania â€“ markup `index.html` ma 3 spÃ³jne kolumny, a `app.js` utrzymuje stan (wyszukiwarka, filtry, przeÅ‚Ä…cznik auto-refresh, metka czasu). AutoodÅ›wieÅ¼anie dziaÅ‚a na osobnej pÄ™tli `silent`, manualne odÅ›wieÅ¼anie pokazuje placeholder, a bÅ‚Ä™dy nie kasujÄ… istniejÄ…cych danych.
- âœ… Historia w Cockpicie wyÅ›wietla teraz panel â€History Insightsâ€ â€“ karty pokazujÄ… liczbÄ™ Å¼Ä…daÅ„, skutecznoÅ›Ä‡, bÅ‚Ä™dy i Å›redni czas operacji; dane liczone sÄ… w `app.js` na podstawie bieÅ¼Ä…cego filtra, wiÄ™c operator ma szybki oglÄ…d jakoÅ›ci zadaÅ„ bez siÄ™gania do tabeli.
- âœ… ZakÅ‚adka â€Zadania w tleâ€ ma panel kontrolny (wyszukiwarka, filtry typÃ³w, auto-refresh, meta â€ostatnie odÅ›wieÅ¼enieâ€) oraz kafle statusÃ³w Watcher/Documenter/Gardener; `app.js` utrzymuje stan `jobsState`, renderuje listÄ™ i steruje auto odÅ›wieÅ¼aniem bez bezpoÅ›rednich manipulacji DOM. Dodatkowe karty â€Jobs Insightsâ€ pokazujÄ… liczbÄ™ widocznych zadaÅ„ vs. ogÃ³Å‚em, ile jobÃ³w pracuje oraz ile zakoÅ„czyÅ‚o siÄ™ bÅ‚Ä™dem (z uwzglÄ™dnieniem bieÅ¼Ä…cego filtra/wyszukiwania).
- âœ… ZakÅ‚adka â€PamiÄ™Ä‡â€ posiada panel sterowania (wyszukiwarka, filtry wynikÃ³w, auto-refresh, metka czasu); `app.js` zarzÄ…dza `memoryState`, renderuje lekcje z tagami i aktualizuje graf po odÅ›wieÅ¼eniu zamiast wstrzykiwaÄ‡ HTML ad-hoc, a blok â€Memory Insightsâ€ pokazuje liczbÄ™ lekcji widocznych/ogÃ³Å‚em, sukcesy vs bÅ‚Ä™dy oraz statystyki grafu wiedzy (wÄ™zÅ‚y/krawÄ™dzie) zsynchronizowane z API.
- âœ… Historia, Zadania w tle i PamiÄ™Ä‡ majÄ… przyciski â€â™»ï¸ Resetâ€, ktÃ³re kasujÄ… zapisane filtry, wyszukiwarki i auto-refresh â€“ klikniÄ™cie natychmiast odÅ›wieÅ¼a dane i zapisuje stan w `venomUIPreferences`, dziÄ™ki czemu operator nie musi rÄ™cznie cofaÄ‡ zmian podczas pracy na Cockpicie.
- âœ… Tab bar Cockpitu ma panel preferencji â€“ operator widzi domyÅ›lnÄ… zakÅ‚adkÄ™ i moÅ¼e jednym klikniÄ™ciem oznaczyÄ‡ bieÅ¼Ä…cÄ… jako domyÅ›lnÄ… (znacznik â­ na przycisku), bÄ…dÅº przywrÃ³ciÄ‡ tryb â€Transmisjaâ€; preferencja Å¼yje w `venomUIPreferences.general`.
- âœ… Cockpit posiada â€Centrum preferencjiâ€ (modal z podsumowaniem zapisanych stanÃ³w, importem/eksportem JSON i przyciskami resetujÄ…cymi). Operator jednym klikniÄ™ciem czyÅ›ci ustawienia Cockpitu, moduÅ‚Ã³w zewnÄ™trznych lub caÅ‚ego VENOM UI (czyÅ›ci `venomUIPreferences`, `venomActiveTab`, `venomFlowInspectorPrefs`, `venomWarRoomPreferences`, `brainPreferences`, `venomInspectorUIPreferences`, `inspectorPinnedTraces` itp.), a panel pokazuje aktualne wartoÅ›ci filtrÃ³w/Lab Mode/default tabÃ³w i pozwala skopiowaÄ‡/przenieÅ›Ä‡ konfiguracjÄ™ miÄ™dzy Å›rodowiskami â€“ zarÃ³wno przez schowek, jak i poprzez pobranie/wczytanie pliku JSON.
- âœ… Flow Inspector: dodano panel sterowania (wyszukiwarka, filtry statusÃ³w, auto-refresh) z nowymi klasami (`flow-controls`, `flow-filter-btn`, `flow-auto-refresh`). `flow_inspector.js` utrzymuje teraz stan z filtrowaniem, klawiaturÄ…, auto odÅ›wieÅ¼aniem listy oraz inteligentnym refreshem diagramu (bez inline-style/eventÃ³w w HTML) **+** nagÅ‚Ã³wek `venom-page` z kartami meta (liczba zadaÅ„ w kolejce, czas ostatniego odÅ›wieÅ¼enia) aktualizowanymi przez JS oraz przeÅ‚Ä…cznikiem auto-refresh w tym samym miejscu co na makiecie.
- âœ… Flow Inspector: preferencje operatora (fraza wyszukiwania, aktywny filtr statusu i stan auto-refresh) sÄ… zapisywane w `localStorage`, a warstwa JS synchronizuje je z UI â€“ po odÅ›wieÅ¼eniu widoku lista zadaÅ„ i przeÅ‚Ä…czniki zachowujÄ… poprzedni kontekst pracy.
- âœ… Inspector: preferencje listy Å›ladÃ³w (fraza wyszukiwania, filtr statusu oraz auto-refresh) sÄ… zapisywane w `localStorage`, wiÄ™c po przeÅ‚adowaniu widoku panel od razu otwiera siÄ™ w tym samym stanie i automatycznie startuje/stopuje odÅ›wieÅ¼anie wedÅ‚ug zapisanego wyboru.
- âœ… Inspector: nagÅ‚Ã³wek `venom-page` dostaje live metryki â€“ liczba widocznych Å›ladÃ³w vs. Å‚Ä…czna oraz liczba przypiÄ™tych, a `inspector.js` aktualizuje je przy kaÅ¼dym fetchu/filtrze i po akcji pinowania.
- âœ… QA: dodano `scripts/qa/run_ui_suite.sh` + `make qa`, co automatyzuje uruchomienie peÅ‚nego `pytest -q` (1348 passed / 108 skipped). Wynik testÃ³w opisany w planie #6.
- âœ… Inspector: panel boczny ma wyszukiwarkÄ™, filtry statusÃ³w i auto-refresh (`inspector-controls`, `inspector-filter-btn`, `inspector-meta`), a `inspector.js` to klasa `InspectorApp` (vanilla JS) zarzÄ…dzajÄ…ca listÄ…, diagramem Mermaid i zoomem bez Alpine/inline-eventÃ³w.
- âœ… Inspector: diagram sekwencji moÅ¼na teraz skopiowaÄ‡ jako kod Mermaid lub pobraÄ‡ jako PNG/SVG, a caÅ‚y Å›lad eksportowaÄ‡ do JSON jednym klikniÄ™ciem â€“ uÅ‚atwia to przenoszenie wynikÃ³w analizy do ticketÃ³w/Jiry.
- âœ… Inspector: operator moÅ¼e przypinaÄ‡ istotne Å›lady (panel â€PrzypiÄ™teâ€) oraz eksportowaÄ‡ detale wybranego kroku do JSON (kopiuj + pobierz); pinowanie synchronizuje siÄ™ w `localStorage`, wiÄ™c zestaw obserwowanych Å›ladÃ³w pozostaje po odÅ›wieÅ¼eniu widoku.
- âœ… War Room: szablon (`strategy.html`) ma meta panel (ostatnie odÅ›wieÅ¼enie, auto-refresh, alert) bez inline JS; `strategy.js` zarzÄ…dza stanem, fallbackami, przeÅ‚Ä…cznikiem auto-refresh i pokazuje bÅ‚Ä™dy wyÅ‚Ä…cznie przez klasy (`war-room-alert`, `war-room-shell.is-loading`).
- âœ… Flow Inspector: wizualizacja przepÅ‚ywu pozwala teraz jednym klikniÄ™ciem skopiowaÄ‡ kod Mermaid oraz pobraÄ‡ gotowy plik PNG/SVG â€“ dziÄ™ki temu diagramy moÅ¼na szybko wkleiÄ‡ do ticketÃ³w lub dokumentacji bez robienia screenshotÃ³w.
- âœ… The Brain: graf wiedzy pamiÄ™ta ustawienia filtrÃ³w/szukania/auto-refresh (localStorage) i posiada akcje eksportowe (JSON + PNG), wiÄ™c analizy sieci zaleÅ¼noÅ›ci moÅ¼na archiwizowaÄ‡ lub udostÄ™pniaÄ‡ innym czÅ‚onkom zespoÅ‚u bez zewnÄ™trznych narzÄ™dzi.
