# VENOM ACADEMY - Opcjonalne zależności do trenowania/fine-tuningu modeli
# Instalacja: pip install -r requirements-academy.txt
#
# UWAGA: Wymaga CUDA 12.0+ i nvidia-container-toolkit dla GPU.
# Możliwe jest użycie CPU, ale będzie znacznie wolniejsze.

# === Core Framework (CPU / GPU) ===
accelerate>=0.34.0            # Wymagane przez TRL/PEFT (działa na CPU i GPU)
datasets>=3.2.0               # Hugging Face Datasets library
trl<0.9.0                     # TRL (SFTTrainer)
peft>=0.18.0                  # Parameter-Efficient Fine-Tuning (LoRA)
pypandoc>=1.14                # Wrapper Pandoc do konwersji dokumentów

# === GPU Acceleration Stack (Optional - Nvidia GPU Only) ===
# Odkomentuj jeśli masz GPU. Unsloth wymaga CUDA i nie zainstaluje się na samym CPU.
# unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git
# bitsandbytes>=0.49.0          # 4-bit/8-bit quantization (wymaga CUDA)
# xformers<0.0.26; platform_system == "Linux"  # Memory-efficient attention (wymaga CUDA)

# === Docker SDK (Optional) ===
docker>=7.1.0                 # Docker Python SDK dla GPUHabitat

# === Progress & Monitoring (Optional) ===
wandb>=0.19.1                 # Weights & Biases integration (opcjonalne)
tensorboard>=2.18.0           # TensorBoard logging (opcjonalne)

# UWAGI INSTALACYJNE:
# 1. Dla GPU (NVIDIA):
#    - Zainstaluj CUDA Toolkit 12.0+
#    - Zainstaluj nvidia-container-toolkit:
#      curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg
#      curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
#        sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
#        sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
#      sudo apt-get update && sudo apt-get install -y nvidia-container-toolkit
#      sudo systemctl restart docker
#
# 2. Dla CPU (fallback):
#    - Wszystkie pakiety zadziałają, ale trening będzie wolny
#    - Ustaw ACADEMY_ENABLE_GPU=false w .env
#
# 3. Weryfikacja instalacji:
#    - docker run --rm --gpus all nvidia/cuda:12.0.0-base-ubuntu22.04 nvidia-smi
#    - python -c "import torch; print(f'CUDA: {torch.cuda.is_available()}')"
